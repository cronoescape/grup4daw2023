<html>

<head>
  <title>Test api fetch</title>
</head>

<body>

  Phone on database to test 669669669
  <input type="text" id="number" placeholder="669669669">
  <button id="test-phone">Test phone</button>
  <div id="test-phone-container"></div>
  <br>
  <br>
  <br>

  <script type="module">
    //import all modules needed for a phone aut
    import { } from "https://www.gstatic.com/firebasejs/6.0.2/firebase.js";
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
    import { getAuth, signInWithPhoneNumber, RecaptchaVerifier, signInWithCredential, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDp_QjlZP6cah2JBQLIXKSbfKtOIUfZ4Tw",
      authDomain: "cronoescape-ioc.firebaseapp.com",
      databaseURL: "https://cronoescape-ioc-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "cronoescape-ioc",
      storageBucket: "cronoescape-ioc.appspot.com",
      messagingSenderId: "240259839325",
      appId: "1:240259839325:web:20ef18366fd73d2aa2a4b4",
      measurementId: "G-QQD81WK4CE"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const database = getDatabase(app);























    //PHONE TEST
    document.getElementById("test-phone").addEventListener("click", testPhone);
    function testPhone() {
      let phone = document.getElementById("number").value;

    }



    //function to check if the phone number is valid should be a string of 9 numbers and start with 6 or 7
    function phoneNotValid(phone) {
      return phone.length != 9 || phone[0] != 6 && phone[0] != 7;
    } F

    //function to check if the phone number already exists in the database
    function phoneExists(phone) {
      let url = `${firebaseConfig.databaseURL}/phones/${phone}/.json`;
      return dataExists(url);
    }





    //function to make an http request to the URL and return the response
    function httpRequest(url) {
      var httpRequest = new XMLHttpRequest();
      httpRequest.open('GET', url, false);
      httpRequest.send();
      if (httpRequest.status === 200) {
        return httpRequest.responseText;
      } else {
        return null;
      }
    }

    //function to check if the data exists in the database
    function dataExists(url) {
      let data = httpRequest(url);
      if (data != "null") {
        return true;
      } else {
        return false;
      }
    }



  </script>

</body>

</html>